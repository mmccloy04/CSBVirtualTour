<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://cdn.glitch.global/189c5b32-4e8b-4e96-b443-5aae4d110245/qublogo.png?v=1706269760196" /> <!--Queens logo sourced from https://www.stickpng.com/img/icons-logos-emojis/russell-group-universities/queens-university-belfast-logo -->
    <title>EEECS VR Tour</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script src="../../../js/script.js"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.misc.min.js"></script> <!-- script for hand controls and animation sourced from https://www.youtube.com/watch?v=vQ85u3dzmZY and https://github.com/c-frame/aframe-super-hands-component-->
    <script src="https://unpkg.com/super-hands@^3.0.3/dist/super-hands.min.js"></script> <!-- script for superhands sourced from https://github.com/c-frame/aframe-super-hands-component-->
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script> <!-- script for event set component sourced from https://aframe.io/docs/1.5.0/guides/building-a-360-image-gallery.html -->
        
    <script src="../../../js/aframe-physics-system.js"></script> <!--script for physics sourced from https://github.com/c-frame/aframe-physics-system/tree/master/dist-->
    <script src="../../../js/force-pushable.js"></script> <!--script for pushable component sourced from ttps://github.com/c-frame/aframe-physics-system/tree/master/examples/components -->    
    
    <!-- CUSTOM COMPONENT
    Registering a custom component to have one entity face another entity (used to make objects face the user)
    Sourced from https://stackoverflow.com/questions/66508949/a-frame-make-model-face-the-viewer-center-of-the-screen-or-canvas -->
    <script>
      AFRAME.registerComponent("look-at", {
        schema: { type: "selector" },

        init: function () {},

        tick: function () {
          this.el.object3D.lookAt(this.data.object3D.position);
        },
      });
    </script>
    
    <!--CONTROLLER COMPONENT
    Used to support all the controller components, while providing the hand and overriding the model.
    Sourced from aframe.io/docs/1.5.0/introduction/interactions-and-controllers.html#creating-custom-controllers -->
    <script>
      AFRAME.registerComponent("custom-controls", {
        schema: {
          hand: { default: "" },
          model: { default: "customControllerModel.gltf" },
        },
        update: function () {
          var hand = this.data.hand;
          var el = this.el;
          var controlConfiguration = {
            hand: hand,
            model: false,
            orientationOffset: { x: 0, y: 0, z: hand === "left" ? 90 : -90 },
          };
          // Build on top of controller components.
          el.setAttribute("vive-controls", controlConfiguration);
          el.setAttribute("oculus-touch-controls", controlConfiguration);
          el.setAttribute("windows-motion-controls", controlConfiguration);
          // Set a model.
          el.setAttribute("gltf-model", this.data.model);
        },
      });
    </script>
    
  </head>
  
   <body>
    <a-scene>
      
     <!--ASSETS-->
      <a-assets>
        <!--assets for icons-->
        <img id="task_icon" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/task5.png?v=1706309028596">
        <!--360 images for locations-->
        <img id="f3_image" src="https://cdn.glitch.global/0ecceb09-097f-4efc-83ce-6923956c956e/042_foyerlifts.jpg?v=1699107301856">
        <img id="q1_image" src="https://cdn.glitch.global/0ecceb09-097f-4efc-83ce-6923956c956e/044_corridor1_canjustseelab.jpg?v=1699107303962">
        <img id="q2_image" src="https://cdn.glitch.global/0ecceb09-097f-4efc-83ce-6923956c956e/050_lab_personworking.jpg?v=1699107305370">
        <img id="q3_image" src="https://cdn.glitch.global/0ecceb09-097f-4efc-83ce-6923956c956e/055_corridor2_myreflection.jpg?v=1699107362968">
      </a-assets>
      
      <!--CAMERA AND CONTROLS-->
      <a-entity>
        <a-camera position="1 1 0" id="myCamera" cursor="rayOrigin: mouse"></a-camera>
        <a-entity sphere-collider="objects: a-plane, a-box, a-sphere" super-hands hand-controls="hand: right"></a-entity>  <!-- Right hand implements hand controls with superhands, adapted/sourced from https://github.com/c-frame/aframe-super-hands-component -->
        <a-entity oculus-touch-controls="hand: left" thumbstick-logging></a-entity> <!--Left hand is the controller, adapted/sourced from https://aframe.io/docs/1.5.0/components/oculus-touch-controls.html -->
        <a-entity laser-controls="hand: left"></a-entity> <!--Left hand (controller) has laser, adapted/sourced from https://aframe.io/docs/1.5.0/components/laser-controls.html -->
      </a-entity>
      
      <!--BACKGROUND-->  
      <a-sky src="#q1_image" rotation="0 185 0"></a-sky>
      
      <!--SPHERES LINKING TO OTHER LOCATIONS -->
      <a-sphere id="f3" position="11 1.5 -0.3" radius="1" src="#f3_image"
        event-set__enter="_event: mouseenter; scale: 1.2 1.2 1.2"
        event-set__leave="_event: mouseleave; scale: 1 1 1">
        <a-text font="kelsonsans" value="This way to the\nFirst Floor Foyer" width="7" position="0 -1.5 0" align="center" look-at="#myCamera"></a-text>
      </a-sphere>
      
      <a-sphere id="q2" position="-0.5 1.2 -8" radius="1" src="#q2_image"
        event-set__enter="_event: mouseenter; scale: 1.2 1.2 1.2"
        event-set__leave="_event: mouseleave; scale: 1 1 1">
        <a-text font="kelsonsans" value="Learning Lab" width="7" position="0 -1.3 0" align="center" look-at="#myCamera"></a-text>
      </a-sphere>
      
      <a-sphere id="q3" position="-11 1 0" radius="1" src="#q3_image"
        event-set__enter="_event: mouseenter; scale: 1.2 1.2 1.2"
        event-set__leave="_event: mouseleave; scale: 1 1 1">
        <a-text font="kelsonsans" value="This way to the\nQuiet Space" width="7" position="0 -1.5 0" align="center" look-at="#myCamera"></a-text>
      </a-sphere>
      
      
      <!--TASK-->
      <a-box id="task" position="6.7 -0.5 -5" src="#task_icon" height="1" rotation="0 20 0"
        event-set__enter="_event: mouseenter; _target: #taskText; visible: true"
        event-set__leave="_event: mouseleave; _target: #taskText; visible: false">
        <a-text id="taskText" value="Uh oh there are boxes blocking the Learning Lab - keep clicking on the boxes to knock them out of the way before they fall down!" 
                align="center" color="#FFFFFF" width="6" font="kelsonsans" 
                visible="false" position="0.05 1.5 -0.05" geometry="primitive: plane; width: 0; height: 0;" material="color: #333333" look-at="#myCamera"></a-text>
      </a-box>
      
      
      <!-- INTERACTIVE SCENARIO - WALL OF BOXES 
      The below was sourced/adapted from the following example:
      https://c-frame.github.io/aframe-physics-system/examples/cannon/stress.html
      https://github.com/c-frame/aframe-physics-system/blob/master/examples/cannon/stress.html-->
      
      <!-- Floor -->
      <a-box width="75" height="0.01" depth="75" static-body visible="false" position="0 -4 0"></a-box>
      
       <!-- Blocks -->
      <a-entity id= "boxes" visible="false" position="0 0 2.5">
        <a-box position="-4 -2.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="-2 -2.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="0 -2.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="2 -2.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>

        <a-box position="-4 -0.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="-2 -0.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="0 -0.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="2 -0.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>

        <a-box position="-4 1.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="-2 1.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="0 1.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="2 1.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>

        <a-box position="-4 3.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="-2 3.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="0 3.5 -5.5" color="#f46d43" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
        <a-box position="2 3.5 -5.5" color="#a50026" width="2" height="2" depth="2" dynamic-body force-pushable></a-box>
      </a-entity>
    </a-scene>
  </body>


  <!--NAVIGATE TO OTHER PAGES (LOCATIONS/VIDEOS) -->  
  <script> 
    document
      .querySelector("#f3")
      .addEventListener("click", e => {
        location.href = "f3.html";
    });
    document
      .querySelector("#q2")
      .addEventListener("click", e => {
        location.href = "q2.html";
    });
    document
      .querySelector("#q3")
      .addEventListener("click", e => {
        location.href = "q3.html";
    });
    
    <!--SHOW BOXES WHEN HOVER OVER TASK BOX-->
    document
      .querySelector("#task")
      .addEventListener("mouseenter", e => {
        document.querySelector('#boxes').setAttribute('visible', 'true')
    });
    
  </script>
    
 
</html>
