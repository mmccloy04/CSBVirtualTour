<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://cdn.glitch.global/189c5b32-4e8b-4e96-b443-5aae4d110245/qublogo.png?v=1706269760196" /> <!--Queens logo sourced from https://www.stickpng.com/img/icons-logos-emojis/russell-group-universities/queens-university-belfast-logo -->
    <title>EEECS VR Tour</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script src="../../../js/script.js"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.misc.min.js"></script> <!-- script for hand controls and animation sourced from https://www.youtube.com/watch?v=vQ85u3dzmZY and https://github.com/c-frame/aframe-super-hands-component-->
    <script src="https://unpkg.com/super-hands@^3.0.3/dist/super-hands.min.js"></script> <!-- script for superhands sourced from https://github.com/c-frame/aframe-super-hands-component-->
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script> <!-- script for event set component sourced from https://aframe.io/docs/1.5.0/guides/building-a-360-image-gallery.html -->

    <!--The below scripts are sourced from the following example: https://aframe.io/docs/1.5.0/guides/building-a-360-image-gallery.html -->
    <script src="https://unpkg.com/aframe-template-component@3.x.x/dist/aframe-template-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@4.x.x/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.jss"></script>
    
    <!-- CUSTOM COMPONENT
    Registering a custom component to have one entity face another entity (used to make objects face the user)
    Sourced from https://stackoverflow.com/questions/66508949/a-frame-make-model-face-the-viewer-center-of-the-screen-or-canvas -->
    <script>
      AFRAME.registerComponent("look-at", {
        schema: { type: "selector" },

        init: function () {},

        tick: function () {
          this.el.object3D.lookAt(this.data.object3D.position);
        },
      });
    </script>
    
    <!--CONTROLLER COMPONENT
    Used to support all the controller components, while providing the hand and overriding the model.
    Sourced from aframe.io/docs/1.5.0/introduction/interactions-and-controllers.html#creating-custom-controllers -->
    <script>
      AFRAME.registerComponent("custom-controls", {
        schema: {
          hand: { default: "" },
          model: { default: "customControllerModel.gltf" },
        },
        update: function () {
          var hand = this.data.hand;
          var el = this.el;
          var controlConfiguration = {
            hand: hand,
            model: false,
            orientationOffset: { x: 0, y: 0, z: hand === "left" ? 90 : -90 },
          };
          // Build on top of controller components.
          el.setAttribute("vive-controls", controlConfiguration);
          el.setAttribute("oculus-touch-controls", controlConfiguration);
          el.setAttribute("windows-motion-controls", controlConfiguration);
          // Set a model.
          el.setAttribute("gltf-model", this.data.model);
        },
      });
    </script>
  
   <!-- TEMPLATE TO BE REUSED 
    Sourced/adapted from https://aframe.io/docs/1.5.0/guides/building-a-360-image-gallery.html -->
    <script id="link" type="text/html">
      <a-entity class="link"
        geometry="primitive: plane; height: 1; width: 1.3"
        material="shader: flat; src: ${thumb}"
        sound="on: click; src: #click-sound"
        event-set__mouseenter="scale: 1.1 1.1 1"
        event-set__mouseleave="scale: 1 1 1"
        event-set__click="_target: #info_box; _delay: 300; material.src: ${src}"
        proxy-event="event: click; to: #info_box 60; as: fade"></a-entity>
    </script>
  </head>

  <body>
    <a-scene>
      
      <!--ASSETS-->
      <a-assets>
        <!--assets for icons-->
        <img id="task_icon" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/task5.png?v=1706309028596">
        
        <!--360 images for locations-->
        <img id="c1_image" src="https://cdn.glitch.global/0ecceb09-097f-4efc-83ce-6923956c956e/034_corridor_techniciansdesk.jpg?v=1698967209660">
        <img id="g6_image" src="https://cdn.glitch.global/0ecceb09-097f-4efc-83ce-6923956c956e/021_foyertoilets_doorclosed_doortolab.jpg?v=1698966414094">
        
        <!-- assets for interactive scenarios -->
        <audio id="click-sound" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
        <img id="thumb1" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/thumb_1.png?v=1706389421704">
        <img id="thumb2" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/thumb_2.png?v=1706391009049">
        <img id="thumb3" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/thumb_3.png?v=1706389231827">
        <img id="thumb4" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/thumb_4.png?v=1706389424792">
        
        <!--The below images for the information panels have been adapted/sourced from the following links:
        https://qubstudentcloud.sharepoint.com/:p:/r/sites/stu-seeecs/_layouts/15/Doc.aspx?sourcedoc=%7B3A09014E-3A4F-48F0-8C78-A1870D22AB4D%7D&file=EEECS-Student-IT%20GettingStarted-2023-24.pptx&action=edit&mobileredirect=true
        https://qubstudentcloud.sharepoint.com/sites/stu-seeecs/SitePages/IT/Student-induction-information.aspx  
        https://selfservice.eeecs.qub.ac.uk/ -->
        <img id="image1" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/Image1.jpg?v=1706390790712">
        <img id="image2" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/Image2.jpg?v=1706390908106">
        <img id="image3" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/Image3.jpg?v=1706390914085">
        <img id="image4" src="https://cdn.glitch.global/943a3cf6-3872-4e08-b494-74ea4b0fdad8/Image4.jpg?v=1706390916652">
      </a-assets>

      <!--CAMERA AND CONTROLS-->
      <a-entity>
        <a-camera position="1 1 0" id="myCamera" cursor="rayOrigin: mouse"></a-camera>
        <a-entity sphere-collider="objects: a-plane, a-box, a-sphere" super-hands hand-controls="hand: right"></a-entity>  <!-- Right hand implements hand controls with superhands, adapted/sourced from https://github.com/c-frame/aframe-super-hands-component -->
        <a-entity oculus-touch-controls="hand: left" thumbstick-logging></a-entity> <!--Left hand is the controller, adapted/sourced from https://aframe.io/docs/1.5.0/components/oculus-touch-controls.html -->
        <a-entity laser-controls="hand: left"></a-entity> <!--Left hand (controller) has laser, adapted/sourced from https://aframe.io/docs/1.5.0/components/laser-controls.html -->
      </a-entity>
      
      <!--BACKGROUND-->
      <a-sky src="#c1_image" rotation="0 -60 0"></a-sky>
      
      <!--SPHERES LINKING TO OTHER LOCATIONS -->
      <a-sphere id="g6" position="5 0.9 10 " radius="1" src="#g6_image"
        event-set__enter="_event: mouseenter; scale: 1.2 1.2 1.2"
        event-set__leave="_event: mouseleave; scale: 1 1 1">
        <a-text font="kelsonsans" value="This way to the\nGround Floor Foyer" width="7" position="0 -1.4 0" align="center" look-at="#myCamera"></a-text>
      </a-sphere>

      <!-- INTERACTIVE SCENARIOS-->
      
      <!--TASK-->
      <a-box id="task" position="15 -2 1.8" src="#task_icon" scale="2 2 2" rotation="0 230 0" 
        event-set__enter="_event: mouseenter; _target: #taskText; visible: true"
        event-set__leave="_event: mouseleave; _target: #taskText; visible: false">
        <a-text id="taskText" value="Welcome to EEECS! Your first task is to complete your IT induction - click on the task box below to get started and then read through the information on the panels behind you. Once you're done, head to the Computer Lab next door."
        align="center" color="#FFFFFF" width="7" font="kelsonsans" 
        visible="false" position="0 1.9 0" geometry="primitive: plane; height: 0; width: 0" material="color: #333333" rotation="0 60 0"></a-text>
      </a-box>

            
       <!--INFO BOXES WITH CLICK SOUND
      Sourced/adapted from https://aframe.io/docs/1.5.0/guides/building-a-360-image-gallery.html -->
      <a-plane id="info_box" position="-3.48 0.43 1.3" width="7.4" height="4.35" rotation="0.5 110 0.23" src="#image1" visible="false">
        <!--passing images to asset template-->
        <a-entity id="links" layout="type: line; margin: 1.5" position= "-2.3 -2 1" rotation="-20 0 0">
            <a-entity id="link1" template="src: #link" data-src="#image1" data-thumb="#thumb1" scale="1.1 1.1 1"></a-entity>
            <a-entity id="link2" template="src: #link" data-src="#image2" data-thumb="#thumb2"></a-entity>
            <a-entity id="link3" template="src: #link" data-src="#image3" data-thumb="#thumb3"></a-entity>
            <a-entity id="link4" template="src: #link" data-src="#image4" data-thumb="#thumb4"></a-entity>
        </a-entity>
      </a-plane>  

    </a-scene>
  </body>

 
  <script>  
    <!--NAVIGATE TO OTHER PAGES (LOCATIONS/VIDEOS) -->  
    document
      .querySelector("#g6")
      .addEventListener("click", e => {
        location.href = "g6.html";
    });
  
    <!--SHOW INFO PANELS WHEN CLICK TASK BOX-->
    document
      .querySelector("#task")
      .addEventListener("click", e => {
        document.querySelector('#info_box').setAttribute('visible', 'true') 
    });
    
    <!--INDICATES WHICH PANEL HAS CURRENTLY BEEN SELECTED (SLIGHTLY LARGER)-->
    document
      .querySelector("#link1")
      .addEventListener("click", e => {
        document.querySelector('#link1').setAttribute('scale', "1.1 1.1 1")
        document.querySelector('#link2').setAttribute('scale', "1 1 1")
        document.querySelector('#link3').setAttribute('scale', "1 1 1")
        document.querySelector('#link4').setAttribute('scale', "1 1 1")
    });
    document
      .querySelector("#link2")
      .addEventListener("click", e => {
        document.querySelector('#link1').setAttribute('scale', "1 1 1")
        document.querySelector('#link2').setAttribute('scale', "1.1 1.1 1")
        document.querySelector('#link3').setAttribute('scale', "1 1 1")
        document.querySelector('#link4').setAttribute('scale', "1 1 1")
    });
    document
      .querySelector("#link3")
      .addEventListener("click", e => {
        document.querySelector('#link1').setAttribute('scale', "1 1 1")
        document.querySelector('#link2').setAttribute('scale', "1 1 1")
        document.querySelector('#link3').setAttribute('scale', "1.1 1.1 1")
        document.querySelector('#link4').setAttribute('scale', "1 1 1")
    });
    document
      .querySelector("#link4")
      .addEventListener("click", e => {
        document.querySelector('#link1').setAttribute('scale', "1 1 1")
        document.querySelector('#link2').setAttribute('scale', "1 1 1")
        document.querySelector('#link3').setAttribute('scale', "1 1 1")
        document.querySelector('#link4').setAttribute('scale', "1.1 1.1 1")
    });
  </script>
    
</html>
